<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>请输入访问密码</title>
    <style>
        body { display: flex; justify-content: center; align-items: center; height: 100vh; }
        .box { padding: 32px; border: 1px solid #eee; border-radius: 8px; background: #fff; }
    </style>
</head>
<body>
    <div class="box">
        <h3>请输入访问密码</h3>
        <input type="password" id="password" placeholder="密码">
        <button onclick="submitPassword()">提交</button>
        <div id="msg" style="color:red;margin-top:10px;"></div>
    </div>
    <script>
        // 获取短码
        function getShortCode() {
            // 例如 /f7l3AyyJ 或 /f7l3AyyJ?xxx
            return window.location.search.replace(/^\?code=/, '').split('&')[0];
        }
        function submitPassword() {
            const pwd = document.getElementById('password').value;
            if (!pwd) {
                document.getElementById('msg').innerText = '请输入密码';
                return;
            }
            // 跳转到短链，带上密码参数
            const code = getShortCode();
            if (!code) {
                document.getElementById('msg').innerText = '短码缺失';
                return;
            }
            window.location.href = '/' + code + '?password=' + encodeURIComponent(pwd);
        }
    </script>
</body>
</html>